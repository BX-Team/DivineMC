From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: NONPLAYT <76615486+NONPLAYT@users.noreply.github.com>
Date: Sun, 6 Jul 2025 01:49:27 +0300
Subject: [PATCH] Parchment: Make FixLight use action bar

Original license: GPLv3
Original project: https://github.com/ProjectEdenGG/Parchment

diff --git a/io/papermc/paper/command/subcommands/FixLightCommand.java b/io/papermc/paper/command/subcommands/FixLightCommand.java
index 85950a1aa732ab8c01ad28bec9e0de140e1a172e..fbc38577599dd0e606e2d225ce98943ab49e74f7 100644
--- a/io/papermc/paper/command/subcommands/FixLightCommand.java
+++ b/io/papermc/paper/command/subcommands/FixLightCommand.java
@@ -95,17 +95,23 @@ public final class FixLightCommand implements PaperSubcommand {
         ((StarLightLightingProvider)lightengine).starlight$serverRelightChunks(chunks,
             (final ChunkPos chunkPos) -> {
                 ++relitChunks[0];
-                sender.getBukkitEntity().sendMessage(text().color(DARK_AQUA).append(
-                    text("Relit chunk ", BLUE), text(chunkPos.toString()),
-                    text(", progress: ", BLUE), text(ONE_DECIMAL_PLACES.get().format(100.0 * (double) (relitChunks[0]) / (double) pending[0]) + "%")
+                // DivineMC start - Parchment: Make FixLight use action bar
+                sender.getBukkitEntity().sendActionBar(text().color(DARK_AQUA).append(
+                        text("Relighting Chunks: ", DARK_AQUA), text(chunkPos.toString()),
+                        text(" " + relitChunks[0], net.kyori.adventure.text.format.NamedTextColor.YELLOW),
+                        text("/", DARK_AQUA),
+                        text(pending[0] + " ", net.kyori.adventure.text.format.NamedTextColor.YELLOW),
+                        text("(" + (int) (Math.round(100.0 * (double) (relitChunks[0]) / (double) pending[0])) + "%)", net.kyori.adventure.text.format.NamedTextColor.YELLOW)
                 ));
+                // DivineMC end - Parchment: Make FixLight use action bar
             },
             (final int totalRelit) -> {
                 final long end = System.nanoTime();
                 sender.getBukkitEntity().sendMessage(text().color(DARK_AQUA).append(
-                    text("Relit ", BLUE), text(totalRelit),
-                    text(" chunks. Took ", BLUE), text(ONE_DECIMAL_PLACES.get().format(1.0e-6 * (end - start)) + "ms")
-                ));
+                    // DivineMC start - Parchment: Make FixLight use action bar
+                    text("Relit ", DARK_AQUA), text(totalRelit, net.kyori.adventure.text.format.NamedTextColor.YELLOW),
+                    text(" chunks. Took ", DARK_AQUA), text(ONE_DECIMAL_PLACES.get().format(1.0e-6 * (end - start)) + "ms", net.kyori.adventure.text.format.NamedTextColor.YELLOW)
+                )); // DivineMC end - Parchment: Make FixLight use action bar
                 if (done != null) {
                     done.run();
                 }
